{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DynamoDBTableAccess",
      "Effect": "Allow",
      "Action": [
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:DescribeTable"
      ],
      "Resource": [
        "arn:aws:dynamodb:*:*:table/content_registry",
        "arn:aws:dynamodb:*:*:table/content_registry/index/*",
        "arn:aws:dynamodb:*:*:table/notifications",
        "arn:aws:dynamodb:*:*:table/notifications/index/*",
        "arn:aws:dynamodb:*:*:table/subscriptions",
        "arn:aws:dynamodb:*:*:table/subscriptions/index/*",
        "arn:aws:dynamodb:*:*:table/events",
        "arn:aws:dynamodb:*:*:table/events/index/*",
        "arn:aws:dynamodb:*:*:table/lms_courses",
        "arn:aws:dynamodb:*:*:table/lms_courses/index/*",
        "arn:aws:dynamodb:*:*:table/lms_lessons",
        "arn:aws:dynamodb:*:*:table/lms_lessons/index/*",
        "arn:aws:dynamodb:*:*:table/lms_paths",
        "arn:aws:dynamodb:*:*:table/lms_paths/index/*",
        "arn:aws:dynamodb:*:*:table/lms_progress",
        "arn:aws:dynamodb:*:*:table/lms_progress/index/*",
        "arn:aws:dynamodb:*:*:table/lms_assignments",
        "arn:aws:dynamodb:*:*:table/lms_assignments/index/*",
        "arn:aws:dynamodb:*:*:table/lms_certificates",
        "arn:aws:dynamodb:*:*:table/lms_certificates/index/*",
        "arn:aws:dynamodb:*:*:table/lms_transcripts",
        "arn:aws:dynamodb:*:*:table/lms_transcripts/index/*",
        "arn:aws:dynamodb:*:*:table/metadata",
        "arn:aws:dynamodb:*:*:table/metadata/index/*"
      ]
    },
    {
      "Sid": "S3ContentPrefixAccess",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject"
      ],
      "Resource": [
        "arn:aws:s3:::${BUCKET}/content/*",
        "arn:aws:s3:::lms-media-*/covers/*",
        "arn:aws:s3:::lms-media-*/videos/*",
        "arn:aws:s3:::lms-media-*/posters/*",
        "arn:aws:s3:::lms-media-*/attachments/*",
        "arn:aws:s3:::lms-media-*/temp/*"
      ]
    },
    {
      "Sid": "S3ListContentPrefix",
      "Effect": "Allow",
      "Action": "s3:ListBucket",
      "Resource": [
        "arn:aws:s3:::${BUCKET}",
        "arn:aws:s3:::lms-media-*"
      ],
      "Condition": {
        "StringLike": {
          "s3:prefix": [
            "content/*",
            "covers/*",
            "videos/*",
            "posters/*",
            "attachments/*",
            "temp/*"
          ]
        }
      }
    }
  ]
}






